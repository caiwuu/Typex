(()=>{var t={705:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);o&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},742:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},738:t=>{"use strict";t.exports=function(t){return t[1]}},22:()=>{window._iconfont_svg_string_3243125='<svg><symbol id="icon-del" viewBox="0 0 1962 1024"><path d="M516.03573495-61.3921423h147.57736331l436.51830554 1109.1603911h-138.25668777l-118.06188999-310.68918553H334.28256162l-118.06189003 310.68918553H79.51743047L516.03573495-61.3921423zM374.67215602 629.89129437h428.75107557l-209.71520002-554.58019554h-6.21378331L374.67215602 629.89129437z m1171.29822779-407.00283222c114.9549989 0 198.8410789 29.51547221 254.76513221 90.09986335 46.60337778 52.8171611 71.45851221 125.82912 71.45851226 219.03587554v515.74404776h-116.50844447v-135.14979554c-31.0689189 43.49648555-73.0119589 79.22574222-122.72222778 107.18776889a407.77955555 407.77955555 0 0 1-200.39452444 49.71027c-80.77918777 0-144.47047111-20.19479666-192.62729444-60.5843911a202.53051221 202.53051221 0 0 1-74.56540444-161.55837668c0-91.65331001 35.72925667-160.00492999 110.29466002-206.60830777 65.24472889-43.49648555 158.45148445-66.79817443 279.62026667-68.35162112l192.62729552-3.10689222v-41.94303999c0-135.14979555-69.90506667-201.94796999-209.71519999-201.94797001-59.03094557 0-107.18776889 10.8741211-144.47047112 35.72925667-41.94304 24.85513443-68.35162112 63.69128334-80.77918886 114.95499779L1190.23126713 466.77947216c17.08790557-83.88608 59.03094557-147.57736334 124.27567447-187.96695668 59.03094557-37.28270222 135.14979555-55.92405334 231.46344225-55.92405333z m201.94797111 439.62519668l-184.86006557 3.1068922c-180.19972779 3.10689223-270.29959111 62.13783666-270.29959111 178.64628113 0 37.28270222 13.98101333 66.79817443 45.04993223 91.65330998 31.0689189 23.30168889 71.45851221 35.72925667 121.16878222 35.72925668 76.11884999 0 142.91702557-24.85513443 201.94797-74.56540444 57.47749888-48.15682333 86.99297223-104.08087666 86.99297223-166.21871445v-68.3516211z"  ></path><path d="M-114.66331065 521.15007993V424.05970993h2233.07851891v97.09037z"  ></path></symbol><symbol id="icon-link" viewBox="0 0 1024 1024"><path d="M613.40845063 417.35211313c74.3661975 74.3661975 74.3661975 196.05633844-1e-8 270.42253499L437.6338025 856.7887325c-74.3661975 74.3661975-196.05633844 74.3661975-270.422535 0s-74.3661975-196.05633844 0-270.422535l81.12676031-74.3661975 6.76056375-6.76056375c6.76056375-6.76056375 13.52112656-6.76056375 27.04225313-6.76056281 20.28169031 0 40.56338063 20.28169031 40.56338062 40.56337969-6.76056375 13.52112656-13.52112656 27.04225312-20.28169031 33.80281687L221.29577469 647.2112675c-40.56338063 40.56338063-40.56338063 108.16901437 0 148.73239406 40.56338063 40.56338063 108.16901437 40.56338063 148.73239406 0l175.77464813-175.77464718c40.56338063-40.56338063 54.08450719-108.16901437 13.52112656-148.73239501 0 0-6.76056375-6.76056375-13.52112656-6.76056281s-6.76056375-6.76056375-6.76056375-6.76056375c-13.52112656-13.52112656-13.52112656-20.28169031-13.52112657-27.04225312 0-20.28169031 20.28169031-40.56338063 40.56338063-40.56338063 13.52112656 0 20.28169031 6.76056375 27.04225312 13.52112657 6.76056375 0 13.52112656 6.76056375 20.28169032 13.52112749zM856.7887325 167.2112675c74.3661975 74.3661975 74.3661975 196.05633844 0 270.422535L775.66197219 512c0 6.76056375-6.76056375 6.76056375-6.76056375 6.76056375-6.76056375 6.76056375-13.52112656 6.76056375-20.28169031 6.76056281-20.28169031 0-40.56338063-20.28169031-40.56337969-40.56337969 0-13.52112656 6.76056375-27.04225312 20.28168937-33.80281687l67.60563375-81.12676125c40.56338063-40.56338063 40.56338063-108.16901437 0-148.73239406-40.56338063-40.56338063-108.16901437-40.56338063-148.73239406 0L478.19718313 397.07042281c-40.56338063 40.56338063-60.84507 101.40845063-20.28169032 135.2112675 6.76056375 6.76056375 13.52112656 13.52112656 20.28169032 27.04225313 0 6.76056375 6.76056375 13.52112656 6.76056375 13.52112656 0 20.28169031-13.52112656 33.80281687-33.80281688 33.80281687-6.76056375 0-13.52112656 0-20.28169031-6.76056281l-6.76056375-6.76056375c-6.76056375 0-6.76056375-6.76056375-13.52112656-6.76056281-74.3661975-74.3661975-67.60563375-182.53521094 6.76056375-256.90140844l175.77464718-175.77464812c67.60563375-67.60563375 189.29577469-67.60563375 263.66197219 13.52112656z"  ></path></symbol><symbol id="icon-markdown" viewBox="0 0 1024 1024"><path d="M136.61967679 794.06129354V183.89138517h152.55677748l228.80656544 228.80656543 228.80656541-228.80656543h152.5281767v610.16990837h-152.5281767V399.74177882l-228.80656541 228.80656545-228.80656544-228.80656545v394.31951472h-152.55677748m1182.18632193 38.12489394z"  ></path></symbol><symbol id="icon-todo" viewBox="0 0 1024 1024"><path d="M896.04635421 468.84872419c8.63025493-12.94538297 8.63025493-30.20589283 0-38.83614776l-258.90765483-263.22278173c-17.26050987-21.5756379-47.46640384-8.63025493-47.46640271 17.26050987v155.34459221c-69.04204061 0-440.14301184 12.94538297-470.34890581 513.50018162 0 17.26050987 21.5756379 21.5756379 25.89076594 8.63025493 138.08408235-250.27739875 263.22278173-310.68918557 440.14301184-302.05892949v155.34459221c0 25.89076594 30.20589283 38.83614777 47.46640384 21.5756379l263.22278173-267.53790976z m0 0"  ></path></symbol><symbol id="icon-undo" viewBox="0 0 1024 1024"><path d="M127.95364579 468.84872419l258.90765483 263.22278173c17.26050987 17.26050987 47.46640384 4.31512803 47.46640271-21.5756379v-155.34459221c176.92023011-8.63025493 302.05892949 51.78153074 440.14301297 302.05892949 8.63025493 12.94538297 25.89076594 8.63025493 25.8907648-8.63025493-25.89076594-496.23967061-396.99173717-509.18505358-466.03377777-509.18505359V184.05030457c0-25.89076594-30.20589283-38.83614777-47.46640271-21.5756379l-258.90765483 263.22278172c-8.63025493 12.94538297-8.63025493 30.20589283 0 43.1512758z m0 0"  ></path></symbol><symbol id="icon-fill" viewBox="0 0 1024 1024"><path d="M826.94360937 933.875a78.94687527 78.94687527 0 0 1-78.77812527-79.17187473c0-43.70625 78.77812527-184.72499973 78.77812528-184.72500054S905.74985937 810.99687527 905.74985937 854.70312527A78.975 78.975 0 0 1 826.94360937 933.875zM118.24985965 541.72812473L459.12485965 203.07500027l340.875 338.65312446L459.12485965 880.43750027 118.24985965 541.72812473z m340.875-263.39062446L222.87485965 511.6625h472.78124973L459.12485965 278.33750027zM307.61548437 127.75625L345.49985937 90.125l113.62500028 112.95000027-37.884375 37.63125-113.62500027-112.95000027z"  ></path></symbol><symbol id="icon-radio" viewBox="0 0 1024 1024"><path d="M813.63 162.17H220.08c-59.58 0.02-107.86 48.31-107.88 107.88v485.58c0 59.59 48.3 107.91 107.88 107.93h593.55c59.58-0.06 107.86-48.35 107.88-107.93V270.05c-0.06-59.56-48.32-107.83-107.88-107.88zM692.59 536.34L422.88 697.78c-4.21 2.5-9.02 3.84-13.91 3.85-4.66 0.02-9.25-1.18-13.3-3.51a26.83 26.83 0 0 1-13.73-23.41v-322.9c0.02-14.92 12.13-27 27.05-26.99 4.89 0.01 9.69 1.34 13.89 3.86l269.71 161.44c12.75 7.59 16.95 24.08 9.36 36.84-2.28 3.85-5.51 7.06-9.36 9.36v0.02z"  ></path></symbol><symbol id="icon-align-left" viewBox="0 0 1024 1024"><path d="M539.99 823.979a36.01 36.01 0 1 1 0 72.021H148.024a36.01 36.01 0 1 1 0-72.021h391.964z m335.985-231.993a36.01 36.01 0 1 1 0 72.021h-727.95a36.01 36.01 0 1 1 0-72.021h727.95zM539.99 359.993a36.01 36.01 0 0 1 0 72.021H148.025a36.01 36.01 0 0 1 0-72.021h391.964zM875.975 128a36.01 36.01 0 1 1 0 72.021h-727.95a36.01 36.01 0 0 1 0-72.021h727.95z"  ></path></symbol><symbol id="icon-img" viewBox="0 0 1024 1024"><path d="M832 128a128 128 0 0 1 128 128v512a128 128 0 0 1-128 128H192A128 128 0 0 1 64 768V256a128 128 0 0 1 128-128h640zM704 498.916L473.43 729.429a36.01 36.01 0 0 1-50.461 0.455l-0.398-0.455L320 626.916 146.375 800.484a55.922 55.922 0 0 0 44.715 23.495H832a56.036 56.036 0 0 0 55.979-55.069v-86.016L704 498.916zM832.91 200.02H192a56.036 56.036 0 0 0-55.979 55.069l-0.057 453.973 158.607-158.492a36.01 36.01 0 0 1 50.46-0.455L448 653.084l230.57-230.513a36.01 36.01 0 0 1 50.461-0.455L887.98 581.063V256a55.979 55.979 0 0 0-55.069-55.979zM311.98 320a55.979 55.979 0 1 1 0 112.014 55.979 55.979 0 0 1 0-112.014z"  ></path></symbol><symbol id="icon-align-middle" viewBox="0 0 1024 1024"><path d="M64 176c0 17.6 14.4 32 32 32h832c17.6 0 32-14.4 32-32s-14.4-32-32-32H96c-17.6 0-32 14.4-32 32zM720 368H304c-17.6 0-32 14.4-32 32s14.4 32 32 32h416c17.6 0 32-14.4 32-32s-14.4-32-32-32zM96 656h832c17.6 0 32-14.4 32-32s-14.4-32-32-32H96c-17.6 0-32 14.4-32 32s14.4 32 32 32zM304 880h416c17.6 0 32-14.4 32-32s-14.4-32-32-32H304c-17.6 0-32 14.4-32 32s14.4 32 32 32z"  ></path></symbol><symbol id="icon-font-size" viewBox="0 0 1024 1024"><path d="M296 587.2l89.6-288 89.6 288H296m169.6-398.4h-136L126.4 835.2h94.4l48-153.6h236.8l49.6 153.6H672L465.6 188.8m214.4 496l51.2-137.6 51.2 137.6h-102.4m99.2-201.6h-78.4l-64 171.2 27.2 86.4v-1.6h137.6l28.8 89.6h68.8l-120-345.6"  ></path></symbol><symbol id="icon-clear-style" viewBox="0 0 1024 1024"><path d="M812.9375 623.09375c12.65625 12.65625 12.65625 32.34375 0 45l-59.0625 59.0625 59.0625 59.0625c12.65625 12.65625 11.25 32.34375-1.40625 45-12.65625 11.25-30.9375 11.25-43.59375 0L708.875 772.15625l-59.0625 59.0625c-12.65625 12.65625-32.34375 12.65625-45 1.40625-12.65625-12.65625-12.65625-32.34375-1.40625-45l1.40625-1.40625 59.0625-59.0625-60.46875-60.46875c-12.65625-12.65625-11.25-32.34375 1.40625-45 12.65625-11.25 30.9375-11.25 43.59375 0l59.0625 59.0625 59.0625-59.0625c14.0625-11.25 33.75-11.25 46.40625 1.40625zM440.28125 776.375c16.875 0 32.34375 14.0625 32.34375 32.34375s-14.0625 32.34375-32.34375 32.34375H247.625c-16.875 0-32.34375-14.0625-32.34375-32.34375s14.0625-32.34375 32.34375-32.34375h192.65625zM686.375 182.9375c16.875 0 32.34375 14.0625 32.34375 32.34375 0 16.875-14.0625 32.34375-32.34375 32.34375H492.3125l-98.4375 459.84375c-4.21875 16.875-19.6875 28.125-36.5625 25.3125-15.46875-2.8125-26.71875-16.875-23.90625-33.75v-1.40625l97.03125-450H234.96875c-16.875 0-32.34375-12.65625-32.34375-30.9375s12.65625-32.34375 30.9375-32.34375h2.8125l450-1.40625z"  ></path></symbol><symbol id="icon-header" viewBox="0 0 1024 1024"><path d="M240.08837891 165.93066406h74.15771484v692.13867188h-74.15771484zM709.75390625 165.93066406h74.15771484v692.13867188h-74.15771484zM314.24609375 474.92114258h395.5078125v74.15771484H314.24609375z"  ></path></symbol><symbol id="icon-code" viewBox="0 0 1024 1024"><path d="M589.59536318 191.10837358l88.5316238 33.56626797-248.31463276 655.56009806-88.53162251-33.56626666zM342.22759325 378.11367379L208.34126705 512l133.8863262 133.88632621L275.28443015 712.87683187 74.40759828 512 275.28443015 311.12316813zM651.18875497 418.49735053l133.88632619 133.88632622-133.93366877 133.93366875 66.99050567 66.94316311 200.82948931-200.82948931-200.82948931-200.87683187z"  ></path></symbol><symbol id="icon-bold" viewBox="0 0 1024 1024"><path d="M258.58918381 859.61428833V164.38571167h293.38645935c32.32812881 0 70.56570053 20.16162873 100.11291504 52.14214326 34.76142883 37.54234314 53.8802147 87.25118637 53.5326004 138.69810103 0 53.8802147-19.81401443 101.85098647-52.83737183 138.00287248 18.42355728 8.6903572 36.49950027 21.20447158 52.48975755 36.49950027 38.23757172 36.15188599 60.13727188 86.90357209 59.78965758 139.39332962 0 52.83737182-21.55208588 103.24144363-59.78965758 139.39332962-31.98051453 30.93767166-73.34661484 50.7516861-107.76042939 51.09930038H258.58918381z m67.08955765-67.08955764h271.13914489c15.64264297 0 41.36610031-12.16650009 62.22295762-31.98051453 50.40407181-47.6231575 52.83737182-126.87921524 5.5618286-177.28328706-1.73807144-1.73807144-3.47614289-3.82375718-5.5618286-5.5618286-20.50924301-19.81401443-45.88508606-31.98051453-61.87534333-31.98051453H325.67874146v246.80614472z m0-313.89570237h226.64451599c7.29990006-0.69522858 14.25218582-3.1285286 20.50924301-6.60467148 10.42842865-5.56182862 20.8568573-13.55695725 30.24244308-23.9853859 23.29015732-25.37584305 36.15188599-58.74681473 35.8042717-93.16062927 0-36.84711457-13.20934297-68.82762909-35.8042717-93.16062927-8.6903572-9.73320007-19.11878586-17.72832871-30.24244308-23.98538589-6.25705719-3.47614289-13.20934297-5.9094429-20.16162873-6.60467148H325.67874146v247.50137329z"  ></path></symbol><symbol id="icon-align-right" viewBox="0 0 1024 1024"><path d="M875.968 824a36.032 36.032 0 1 1 0 72H484.032a36.032 36.032 0 1 1 0-72h391.936z m0-232a36.032 36.032 0 1 1 0 72H148.032a36.032 36.032 0 1 1 0-72h727.936z m0-232a36.032 36.032 0 1 1 0 72H484.032a36.032 36.032 0 0 1 0-72h391.936z m0-232a36.032 36.032 0 1 1 0 72H148.032a36.032 36.032 0 0 1 0-72h727.936z"  ></path></symbol><symbol id="icon-underline" viewBox="0 0 1024 1024"><path d="M729.52318152 811.41957328a35.69774168 35.69774168 0 1 1 0 71.34251925H293.31161033a35.69774168 35.69774168 0 0 1-1e-8-71.34251925h436.21157121z m0-669.94173881a35.69774168 35.69774168 0 0 1 35.69774095 35.06217386v275.67766222c0 175.15197477-91.73366176 281.87445107-253.6975987 281.87445106-160.32205255 0-251.84385862-104.65687976-253.6975987-276.63101468V177.22854027A35.69774168 35.69774168 0 0 1 329.2212077 176.64593581v275.73062633a237.06690049 237.06690049 0 0 0 46.29054337 157.0912486 169.48482627 169.48482627 0 0 0 135.79971699 53.33475573 169.85557428 169.85557428 0 0 0 136.01157271-53.38771983 235.372052 235.372052 0 0 0 46.29054336-155.02565208V177.22854027a35.69774168 35.69774168 0 0 1 35.69774097-35.69774169z"  ></path></symbol><symbol id="icon-color" viewBox="0 0 1024 1024"><path d="M541.59588823 134.45643971L541.93477199 135.24716951l294.60334343 606.65922378a33.15417237 33.15417237 0 0 1-59.41769873 29.42644558v-0.50832565L673.87369319 558.4005911H350.46519135l-103.13376277 212.42392213a33.15417237 33.15417237 0 0 1-43.77254365 15.58867314H203.05055851a33.15417237 33.15417237 0 0 1-15.53219356-43.77254364v-0.50832642L482.29115026 135.30364988A33.15417237 33.15417237 0 0 1 541.53940709 134.51292007z m-29.48292672 91.10337298L382.65919203 492.1487275h258.8510586z m-261.44917105 615.63965506h522.8983421a33.15417237 33.15417237 0 0 1 0 66.30834475H250.66379046a33.15417237 33.15417237 0 0 1 0-66.30834475z"  ></path></symbol></svg>',function(t){var e,n=(e=(e=document.getElementsByTagName("script"))[e.length-1]).getAttribute("data-injectcss");if(!(e=e.getAttribute("data-disable-injectsvg"))){var o,r,i,s,a;if(n&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}o=function(){var e,n=document.createElement("div");n.innerHTML=t._iconfont_svg_string_3243125,(n=n.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",n=n,(e=document.body).firstChild?function(t,e){e.parentNode.insertBefore(t,e)}(n,e.firstChild):e.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(o,0):(r=function(){document.removeEventListener("DOMContentLoaded",r,!1),o()},document.addEventListener("DOMContentLoaded",r,!1)):document.attachEvent&&(i=o,s=t.document,a=!1,function t(){try{s.documentElement.doScroll("left")}catch(e){return void setTimeout(t,50)}c()}(),s.onreadystatechange=function(){"complete"==s.readyState&&(s.onreadystatechange=null,c())})}function c(){a||(a=!0,i())}}(window)},259:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(738),r=n.n(o),i=n(705),s=n.n(i)()(r());s.push([t.id,".editor-wrappe{border:solid 1px #eee}.editor-wrappe .tool-bar-item{padding:4px 10px;display:inline-block;border-radius:4px;cursor:pointer;user-select:none}.editor-wrappe .tool-bar{background:#282828;padding:6px}.editor-wrappe #editor-content{padding:16px;min-height:200px}.editor-tooltip{position:relative;display:inline-block}.editor-tooltip .tooltiptext{opacity:0;width:60px;font-size:12px;background-color:#000;color:#fff;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1;top:140%;left:50%;margin-left:-30px;transition:opacity 600ms ease-out}.editor-tooltip .tooltiptext::after{content:'';position:absolute;left:50%;margin-left:-5px;border-width:5px;border-style:solid}.editor-tooltip:hover .tooltiptext{opacity:1}.editor-tooltip .tooltiptext.bottom{top:140%}.editor-tooltip .tooltiptext.bottom::after{bottom:100%;border-color:transparent transparent #000 transparent}.editor-tooltip .tooltiptext.top{top:-140%}.editor-tooltip .tooltiptext.top::after{top:100%;border-color:#000 transparent transparent transparent}",""]);const a=s},815:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var o=n(738),r=n.n(o),i=n(705),s=n.n(i),a=n(742),c=n.n(a),l=new URL(n(363),n.b),d=s()(r()),p=c()(l);d.push([t.id,"html,body{overflow:hidden;overflow-y:auto}.icon{width:1.2em;height:1.2em;vertical-align:-.15em;fill:currentColor;overflow:hidden}#editor-content{word-break:break-all}#editor-content:focus,.custom-input:focus{outline:none}.custom-input{top:-100px;left:0;position:absolute;pointer-events:none;width:2px;background:transparent;border:none;padding:0}.custom-input{opacity:0;caret-color:transparent;color:transparent}.custom-input-iframe{top:-100px;left:0;background:transparent;color:transparent;width:10px;height:0;pointer-events:none;border:none;caret-color:transparent;position:absolute}.custom-caret{top:-100px;left:0;pointer-events:none;position:absolute;width:2px;border:none;padding:0;display:block;animation:caret 1s infinite .5s steps(1,start)}#editor-content ::selection{background:#bad2fa}#editor-content .editor-disabled{user-select:none}.picker{display:flex;justify-content:space-between;margin-top:4px}.left .hue{font-size:0;height:10px;width:200px;background:linear-gradient(to left,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00)}.left .hue .hue-picker{display:inline-block;position:relative;width:6px;height:12px;transform:translate(-6px,-1px);background-color:#f8f8f8;box-shadow:rgba(0,0,0,0.37) 0 1px 4px 0}.left .transparency{position:relative;font-size:0;height:10px;width:200px;background:url("+p+") left center}.left .transparency .transparency-picker-bg{height:100%}.left .transparency .transparency-picker{display:inline-block;position:relative;width:6px;height:12px;transform:translate(-6px,-1px);background-color:#f8f8f8;box-shadow:rgba(0,0,0,0.37) 0 1px 4px 0}.right{position:relative;cursor:pointer}.right .color-block{width:24px;height:24px;position:absolute;top:0}.right .color-block-bg{width:24px;height:24px;background:url("+p+") left center}.palette{width:228px;height:150px;overflow:hidden;border:#eee solid 1px}.palette .palette-picker{pointer-events:none;display:inline-block;position:relative;width:12px;height:12px;border-radius:50%;box-shadow:#fff 0 0 0 1px inset;transform:translate(-6px,-6px)}@-moz-keyframes static-caret{0%{opacity:1}100%{opacity:1}}@-webkit-keyframes static-caret{0%{opacity:1}100%{opacity:1}}@-o-keyframes static-caret{0%{opacity:1}100%{opacity:1}}@keyframes static-caret{0%{opacity:1}100%{opacity:1}}@-moz-keyframes caret{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-webkit-keyframes caret{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes caret{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes caret{0%{opacity:1}50%{opacity:0}100%{opacity:1}}",""]);const h=d},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var i={},s=[],a=0;a<t.length;a++){var c=t[a],l=o.base?c[0]+o.base:c[0],d=i[l]||0,p="".concat(l," ").concat(d);i[l]=d+1;var h=n(p),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(f);else{var u=r(f,o);o.byIndex=a,e.splice(a,0,{identifier:p,updater:u,references:1})}s.push(p)}return s}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=o(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var a=n(i[s]);e[a].references--}for(var c=o(t,r),l=0;l<i.length;l++){var d=n(i[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},363:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADFJREFUOE9jZGBgEGHAD97gk2YcNYBhmIQBgWSAP52AwoAQwJvQRg1gACckQoC2gQgAIF8IscwEtKYAAAAASUVORK5CYII="}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.b=document.baseURI||self.location.href,(()=>{"use strict";var t={};n.r(t),n.d(t,{computeLen:()=>m,debounce:()=>y,isDef:()=>f,isPrimitive:()=>u,isUndef:()=>h,mergeObj:()=>_,multiplication:()=>w,positionCompare:()=>L,setStyle:()=>x,stringify:()=>C,styleToObj:()=>k,throttle:()=>g,times:()=>E,toRawType:()=>b,uuid:()=>S});var e={};n.r(e),n.d(e,{Caret:()=>Vt,appendChild:()=>de,createElm:()=>te,domToVNode:()=>he,initIntercept:()=>re,insertBefore:()=>ce,nativeDocument:()=>ie,nativeSelection:()=>ae,nativeWindow:()=>se,removeChild:()=>pe,replaceChild:()=>le,updateProps:()=>Xt});const o=new WeakMap,r=new WeakMap,i=new WeakMap;function s(t){if(t._isVnode){const e=i.get(t);if(e)return e;if("text"===t.type)return i.get(t);{const e=a(t);return e?i.get(e._$pv):null}}{let e=i.get(t);return"function"==typeof e.type&&(e=a(e.ins)),e}}function a(t){return r.get(t)}function c(t){return t.ins?o.get(a(t.ins)):o.get(t)}function l(t,e){o.set(e,t).set(t,e)}function d(t,e){r.set(e,t).set(t,e)}function p(t,e){i.set(t,e).set(e,t)}function h(t){return null==t}function f(t){return null!=t}function u(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function m(t){return u(t.node.data)?t.node.data.length:t.children.length?t.children.reduce(((t,e)=>t+m(e)),0):0}function g(t,e){let n,o,r;return function(){const i=this,s=arguments;n?(clearTimeout(o),o=setTimeout((function(){Date.now()-r>=e&&(t.apply(i,s),r=Date.now())}),Math.max(e-(Date.now()-r),0))):(t.apply(i,s),r=Date.now(),n=!0)}}function y(t,e=0){let n;return function(...o){clearTimeout(n),n=setTimeout((()=>t.apply(this,o)),e)}}const v=Object.prototype.toString;function b(t){return v.call(t).slice(8,-1).toLowerCase()}function x(t,e){for(const n in e)t.style[n]=e[n]}function w(t,e){return t.replace(/(\d*).*/,(function(t,n){return n*e}))}function C(t){let e=[],n=JSON.stringify(t,((t,n)=>{if("object"==typeof n&&null!==n){if(-1!==e.indexOf(n))return"Circular reference";e.push(n)}return n}));return e=null,n}function k(t){return(t=t.trim()).split(";").filter((t=>t)).reduce(((t,e)=>{const n=e.split(":");return t[n[0].trim()]=n[1].trim(),t}),{})}function S(){return([1e3]+-1e3+-4e3+-8e3).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}function _(t,e){for(let n in e)e.hasOwnProperty(n)&&h(t[n])&&!h(e[n])&&(t[n]=e[n])}function E(t,e,n,...o){let r=0;for(;r++<t;)e.call(n,...o)}function L(t,e){if(t===e)return 0;if(t.originOf(e))return-1;if(e.originOf(t))return 1;const n=t.position.split("-"),o=e.position.split("-"),r=Math.min(n.length,o.length);for(let t=0;t<r;t++){const e=+n[t],r=+o[t];if(e>r)return 1;if(e<r)return-1}}class O{_shouldDelete=!1;_shouldRebuild=!1;constructor({node:t,parent:e,position:n,prevSibling:o,nextSibling:r,children:i}){this.node=t,this.parent=e,this.position=n,this.prevSibling=o,this.nextSibling=r,this.children=i}get component(){return this._$component||this.parent.component}get len(){return m(this)}get elm(){return"function"==typeof this.vn.type?c(a(this.vn.ins)):c(this.vn)}get pathType(){return"string"==typeof this.node.data?3:1}get blockComponent(){return"block"===this.component._type?this.component:this.parent.blockComponent}get vn(){return s(this)}get isLeaf(){return 0===this.children.length}get firstLeaf(){let t=this;for(;t.children&&t.children.length;)t=t.children[0];return t}get lastLeaf(){let t=this;for(;t.children&&t.children.length;)t=t.children[t.children.length-1];return t}get index(){return this.position.split("-").slice(-1)[0]/1}get prevLeaf(){return(this.prevSibling||this.parent?.prevSibling)?.lastLeaf}get nextLeaf(){return(this.nextSibling||this.parent?.nextSibling)?.firstLeaf}insertData(t,e){this.node.data=this.node.data.slice(0,t)+e+this.node.data.slice(t)}contentDelete(t,e){this.node.data=this.node.data.slice(0,t-e)+this.node.data.slice(t)}clearFormat(){this.node.formats={}}setNode({data:t="",formats:e={}}={}){this.node.data=t,this.node.formats=e}setFormat(t){Object.assign(this.node.formats,t)}split(t){if(!this.isLeaf)throw"Non-leaf nodes are indivisible";const e=A({data:this.node.data.slice(t),formats:{...this.node.formats}});return this.contentDelete(this.len,this.len-t),e.insertAfter(this),[this,e]}cloneMark(){return A({data:u(this.node.data)?"":this.node.data.marks?{marks:[]}:{},formats:{...this.node.formats}})}delete(t=!1){this.parent&&(this._shouldDelete=!0,this.parent.rebuild(),t&&!this.parent.len&&this.parent.delete(!0))}positionCompare(t){return L(this,t)}originOf(t){return this.position.includes(t.position+"-")}insertBefore(t){t.parent.children.splice(t.index,0,this),this.delete(!0),t.parent.rebuild()}insertAfter(t){t.parent.children.splice(t.index+1,0,this),this.delete(!0),t.parent.rebuild()}moveTo(t){t.children.push(this),this.delete(!0),t.rebuild()}insertChildrenBefore(t){t.parent.children.splice(t.index,0,...this.children),this.delete(!0),t.parent.rebuild()}insertChildrenAfter(t){t.parent.children.splice(t.index+1,0,...this.children),this.delete(!0),0===t.len&&t.delete(!0),t.parent.rebuild()}deleteBetween(t,e){const n=[];if(this===t||this===e||t===e)return;const o=r=>{for(var i=0;i<r.children.length;i++){const s=r.children[i];t.originOf(s)||e.originOf(s)?o(s):1===s.positionCompare(t)&&-1===s.positionCompare(e)&&(s._shouldDelete=!0,s.parent?._shouldRebuild||(n.push(s.parent),s.parent._shouldRebuild=!0))}};o(this),n.forEach((t=>t.rebuild()))}rebuild(){this._shouldRebuild=!1;let t=null;this.children=this.children.filter((t=>{if(!t._shouldDelete)return!0;t._shouldDelete=!1})),this.node.data.marks&&(this.node.data.marks.length=0),this.children.forEach(((e,n)=>{e.parent=this,this.node.data.marks.push(e.node),e.prevSibling=t,t&&(t.nextSibling=e),e.nextSibling=null,t=e;const o=this.position+"-"+n;e.position!==o&&(e.position=e.node.position=o,e.rebuild())}))}}function A(t,e=null,n=null,o=null,r=0){const i=e?e.position+"-"+r:"0";t.position=i;const s=new O({node:t,parent:e,position:i,prevSibling:n,nextSibling:o,children:[]});if(t.data.marks){let e=null;t.data.marks.reduce(((t,n,o)=>(e=A(n,s,t,null,o),t&&(t.nextSibling=e),e.prevSibling=t,s.children.push(e),e)),null)}return s}function M(t,e){if(t===e)return t;if("0"===t.position)return t;if("0"===e.position)return e;const n=function(t){for(;t.parent;)t=t.parent;return t}(t),o=t.position.split("-"),r=e.position.split("-"),i=Math.min(o.length,r.length);let s;for(s=0;s<i&&o[s]===r[s];s++);return R(o.slice(0,s).join("-"),n)}function P(t,e){if(t instanceof O)return t;if(t.nodeType)return function(t){const e=c(t);return e?z(e):null}(t);if(t._isVnode)return z(t);if("string"==typeof t)return R(t,e);throw"queryPath的参数必须是elm|vn|position"}function z(t){return s(t)||null}function R(t,e){return t.split("-").slice(1).reduce(((t,e)=>t.children[e]),e)}const B=["ref","key","ns"],N=[],$=["ns"];function T(t,e={},n=[]){const o={},r={};for(let t of B)r[t]=e[t]||null;for(let t in e)B.includes(t)||("style"===t&&u(e[t])?o[t]=k(e[t]):o[t]=e[t]);return function(t,e,n,o){let r;if("text"===t)r={_uuid:S(),_isVnode:!0,type:"text",children:o.join("")};else{r={_uuid:S(),_isVnode:!0,type:t,...e,props:n};const i={};for(let t of $)i[t]=r[t];"function"==typeof t?r.props.children=D(o,i):r.children=D(o,i)}return r}(t,r,o,n.flat())}const D=(t,e)=>t.map((t=>u(t)||h(t)?{_isVnode:!0,type:"text",children:t}:(_(t,e),t))),V=class{formatMap=new Map;register(t){this.formatMap.set(t.name,t)}inject(t,e){this[t]=e}render(t){const e=this._group({paths:t.children,restFormats:this.types},0);return this._generateGroups(e,t.len)}_invokeRender(t,e){return e.fmt.render(t,e.value,T)}mergePointsContainer(t,e){this.editor.selection.rangePoints.filter((e=>e.container===t)).forEach((t=>{"start"===t.pointName?t.range.setStart(e,e.len+t.offset):t.range.setEnd(e,e.len+t.offset)}))}_mergeTextPath(t){const e=t[0],n=t.length;if(1===n)return e;for(let t=0;t<n-1;t++)this.mergePointsContainer(e.nextSibling,e),e.node.data+=e.nextSibling.node.data,e.nextSibling.delete();return e}_generateGroups(t,e){return t.map((t=>{let n;const o=this._getFormats(t.commonFormats);if(0===t.commonFormats.length){if(-1!==t.children.findIndex((t=>"object"==typeof t.node.data)))throw"格式标记不合法,文本格式不可用于标记非文本的结构";const n=this._mergeTextPath(t.children);let o;return""===n.node.data?(o=0===e?T("br"):null,p(n,n.parent.vn),n.clearFormat()):(o=T("text",{},[n.node.data]),p(n,o)),o}if((n=o.filter((t=>"component"===t.fmt.type))).length){const e=t.children[0],o=n[0].fmt.render(null,{path:e,editor:this.editor},T);return p(e,o),o}{let n=null,r=null;const i=[];for(let t=0;t<o.length;t++){const e=o[t];"attribute"!==e.fmt.type?(r=this._invokeRender(r,e),n||(n=r)):i.push(e)}for(let t=0;t<i.length;t++){const e=i[t],o=this._invokeRender(r,e);o&&(r=o),n||(n=o)}if(t.children[0].commonFormats)r.children=this._generateGroups(t.children,e);else{if(-1!==t.children.findIndex((t=>"object"==typeof t.data)))throw"格式标记不合法,文本格式不可用于标记非文本的结构";const n=this._mergeTextPath(t.children);let o=null;0===e?(o=T("br"),p(n,r),n.clearFormat()):(o=T("text",{},[n.node.data]),p(n,o)),r.children=[o]}return n}})).filter((t=>t))}get types(){return[...this.formatMap.keys()]}_getFormats(t){return t.map((t=>{const e=Object.keys(t)[0];return{fmt:this.formatMap.get(e),value:t[e]}}))}get(t){return this.formatMap.get(t)||{}}_canAdd(t,e,n){return!!t.node.formats[n]&&(!e.node.formats[n]||e.node.formats[n]===t.node.formats[n]||void 0)}_group(t,e,n=[]){const o={commonFormats:[],children:[]};let r=[],i=null,s={},a=0;for(;e<t.paths.length;e++){let n={...s};const c=t.paths[e];t.restFormats.forEach((t=>{i?this._canAdd(c,i,t)&&s[t]++:(s[t]=0,c.node.formats[t]&&s[t]++)}));const l=Math.max(...Object.values(s));if(i&&Object.keys(c.node.formats).some((t=>["block","component"].includes(this.get(t).type)))){i=null;break}if(i&&Object.keys(i.node.formats).some((t=>["block","component"].includes(this.get(t).type)))){i=null;break}if(i&&0===a&&l>a){s=n;break}if(i&&l===a&&0!==l){s=n;break}o.children.push(c),o.commonFormats=Object.entries(s).filter((t=>t[1]&&t[1]===l)).map((n=>({[n[0]]:t.paths[e].node.formats[n[0]]}))),r=t.restFormats.filter((t=>!o.commonFormats.some((e=>e[t])))),a=l,i=c}return o.commonFormats.length>0&&o.children.length>1&&(o.children=this._group({paths:o.children,restFormats:r},0)),n.push(o),e<t.paths.length&&this._group(t,e,n),n}},j={};function F(t,e){return t?.key===e?.key&&t?.type===e?.type}function H(t,e,n,o){for(let r=n;r<o;r++){const n=e[r];if(f(n)&&F(t,n))return r}}function I(t,e,n){const o={};for(let r=e;r<=n;++r){const e=t[r]?.key;f(e)&&(o[e]=r)}return o}function K(t,e){const n=t.ins?a(t.ins):t;if(void 0!==n){const t=a(n);if(t?.onBeforeUnmount?.(),void 0!==n.children)for(let t=0;t<n.children.length;++t){const o=n.children[t];null!=o&&"string"!=typeof o&&K(o,e)}t&&e.push(t)}}function q(t,e){if(e!==t)if("function"==typeof t.type)if(t.type.isComponent){const n=t.ins=e.ins;n._$pv=t;const o=a(n);n.props=Object.freeze({...t.props}),q(n.render(T),o)}else{const n=a(e),o=t.type(T,t.props);d(t,o),q(o,n)}else if("text"===t.type)l(c(e),t),j.platform.updateProps(t,e);else{const n=c(e);l(n,t);const o=a(e);o&&d(t,o);const r=e.children,i=t.children;j.platform.updateProps(t,e),r!==i&&function(t,e,n){let o,r,i,s,d=0,p=0,u=n.length-1,m=e.length-1,g=n[0],y=e[0],v=n[u],b=e[m];for(;d<=u&&p<=m;)null==g?g=n[++d]:null==v?v=n[--u]:null==y?y=e[++p]:null==b?b=e[--m]:F(y,g)?(q(y,g),g=n[++d],y=e[++p]):F(b,v)?(q(b,v),v=n[--u],b=e[--m]):F(b,g)?(q(b,g),j.platform.insertBefore(t,c(g),c(v).nextSibling),g=n[++d],b=e[--m]):F(y,v)?(q(y,v),j.platform.insertBefore(t,c(v),c(g)),v=n[--u],y=e[++p]):(void 0===o&&(o=I(n,d,u)),r=f(y.key)?o[y.key]:H(y,n,d,u),h(r)?j.platform.insertBefore(t,j.platform.createElm(y),c(g)):(i=n[r],i.tagName!==y.tagName?j.platform.insertBefore(t,j.platform.createElm(y),c(g)):(q(y,i),n[r]=void 0,j.platform.insertBefore(t,c(i),c(g)))),y=e[++p]);p<=m&&(s=null==e[m+1]?null:c(e[m+1]),function(t,e=null,n,o,r){for(;o<=r;++o){const r=n[o];if(null!=r){const n=j.platform.createElm(r);l(n,r),j.platform.insertBefore(t,n,e)}}}(t,s,e,p,m)),d<=u&&function(t,e,n,o){for(;n<=o;++n){const o=e[n];if(null!=o){let e=[],n=c(o);n||(n=c(a(o.ins||{}))),n&&j.platform.removeChild(t,n),K(o,e),e.forEach((t=>{t.onUnmounted?.()})),e=null}}}(t,n,d,u)}(n,i,r)}}function U(t,e){if(N.length=0,h(e)){const e=j.platform.createElm(t);return l(e,t),e}if(f(e.nodeType)&&l(e,e=j.platform.domToVNode(e)),F(t,e))q(t,e);else{let n=c(e);const o=j.platform.createElm(t);j.platform.replaceChild(n.parentNode,o,n),n=null}return N.forEach((t=>{t.onMounted&&t.onMounted()})),N.length=0,c(t)}const Z=[],G=[];function Q(){let t,e;for(;t=Z.shift();){const{partialState:e,component:n}=t;n.prevState||(n.prevState=Object.assign({},n.state)),"function"==typeof e?Object.assign(n.state,e(n.prevState,n.props)):Object.assign(n.state,e),n.prevState=n.state}for(;e=G.shift();)e.syncUpdate()}class W{static isComponent=!0;state={};$nextTick=t=>Promise.resolve().then(t);constructor(t){this.props=Object.freeze({...t})}render(t){throw Error('Component does not implement a required interface "render"')}setState(t={}){return function(t,e){var n;return 0===Z.length&&(n=Q,Promise.resolve().then(n)),Z.push({partialState:t,component:e}),G.some((t=>t===e))||G.push(e),Promise.resolve()}(t,this)}syncUpdate(){const t=a(this);U(this.render(T),t)}}function J(t,e,n){if(e.inputState.isComposing)return;if(!e.collapsed&&!n.shiftKey)return void e.collapse("left"===t);const{shiftKey:o}=n;if(e.collapsed||o)return e.container.component.caretMove(t,e,n);e.collapse("left"===t)}function Y(t,e,n){e.inputState.isComposing||(e.collapsed||n.shiftKey?tt(e,"up"===t?"left":"right",{...e.caret.rect,blockComponent:e.container.blockComponent},{...e.caret.rect,blockComponent:e.container.blockComponent},!1,n):e.collapse("up"===t))}function X(t,e,n,o){if(n.blockComponent!==e.blockComponent)return!1;let r=!0;return("left"===o&&n.x>e.x||"right"===o&&n.x<e.x)&&(r=!1),n.y===t.y&&(r=!0),r}function tt(t,e,n,o,r=!1,i){t.collapsed&&(t.d=0);const{path:s}=J(e,t,i)||{};if(!s)return;if(t.updateCaret(!0),r){const r={...t.caret.rect,blockComponent:s.blockComponent},a=Math.abs(o.x-n.x),c=Math.abs(r.x-n.x),l=X(n,o,r,e);if(!(c<=a&&l))return J("left"===e?"right":"left",t,i),void t.updateCaret(!0)}const a={...t.caret.rect,blockComponent:s.blockComponent};return a.x!==o.x||a.y!==o.y?(X(n,o,a,e)||(r=!0),tt(t,e,n,a,r,i)):void 0}function et(t,e=!1){if(t.inputState.isComposing&&!e)return;const{endContainer:n,startContainer:o}=t;let r=n.component.$editor.queryCommonPath(o,n);r.component.contentDelete(r,t)}class nt extends W{_type="inline";constructor(t){super(t),this.initState()}get contentLength(){return this.$path.len}get $path(){return this.props.path}get $editor(){return this.props.editor}initState(){this.$path._$component=this}update(t,e){return this.onBeforeUpdate&&this.onBeforeUpdate({path:t||this.$path,range:e}),this.setState().then((()=>{this.onAfterUpdate&&this.onAfterUpdate({range:e,path:t})}))}contentInput(t,e,n){const{offset:o,endContainer:r}=e;t.insertData(o,n),this._updatePoints(r,o,n.length),this.update().then((()=>{e.collapse(!1),e.updateCaret()}))}contentDelete(t,e){const{endContainer:n,endOffset:o,collapsed:r}=e;if(r)if(o>0)t.contentDelete(o,1),0===t.len?(this.caretLeave(t,e,"left"),t.delete()):this._updatePoints(n,o,-1);else{const n=this.getPrevLeafPath(t);if(!this.contentLength){const t=this.$path.parent.component;this.$path.delete(),t.update()}n&&n.component.caretEnter(n,e,"right")}else console.log("TODO");this.update(t,e)}caretEnter(t,e,n){if("left"===n){let n=this.getPrevLeafPath(t);if(!n)return{};const o=t.blockComponent===n.blockComponent;e.set(t,o?1:0)}else e.set(t,t.len);return{path:t,range:e}}caretLeave(t,e,n){if("left"===n){let n=this.getPrevLeafPath(t);return n?n.component.caretEnter(n,e,"right"):{}}{let n=this.getNextLeafPath(t)?.firstLeaf;return n?n.component.caretEnter(n,e,"left"):{}}}caretForward(t,e){e.offset<t.len&&(e.offset+=1)}caretBackward(t,e){e.offset>0&&(e.offset-=1)}getPrevLeafPath(t){return t?(t.prevSibling||this.getPrevLeafPath(t.parent))?.lastLeaf:null}getNextLeafPath(t){return t?(t.nextSibling||this.getNextLeafPath(t.parent))?.firstLeaf:null}caretMove(t,e,n){const o=e.container,r=this["left"===t?"caretBackward":"caretForward"],{shiftKey:i}=n;let s={path:o,range:e};return 0===e.d&&(e.d="left"===t?-1:1),this.caretWillBeLeaving(o,e,t)?s=this.caretLeave(o,e,t):r(o,e,n),i||e.collapse("left"===t),s}onKeydownArrowLeft(t,e){J("left",t,e)}onKeydownArrowRight(t,e){J("right",t,e)}onKeydownArrowUp(t,e){Y("up",t,e)}onKeydownArrowDown(t,e){Y("down",t,e)}onKeydownBackspace(t){et(t,!1)}onKeydownEnter(t,e){!function(t,e){t.collapsed||et(t)}(t)}onInput(t,e){!function(t,e){const{data:n,type:o}=function(t){return u(t)?{type:"input",data:t}:t}(e);if(t.collapsed||et(t,!0),"input"===o){let e,o=" "===n?" ":n||"";!t.inputState.isComposing&&n?(console.log("键盘输入：",o),e=t.inputState.value):(console.log("聚合输入:",o),e=t.inputState.value,t.inputState.value=o),console.log(e.length),E(e.length,et,t.editor,t,!0),function(t,e){let{startContainer:n}=t;n?("text"!==n.vn.type&&(n=n.firstLeaf,t.setEnd(n,0)),n.parent.component.contentInput(n,t,e)):console.error("无效path")}(t,o)}else"compositionstart"===o?t.inputState.isComposing=!0:"compositionend"===o&&(t.inputState.isComposing=!1,e.target.value="",setTimeout((()=>{t.inputState.value=""})))}(t,e)}caretWillBeLeaving(t,e,n){if("left"===n&&e.offset<=1){let n=this.getPrevLeafPath(t);if(!n)return!1;const o=t.blockComponent===n.blockComponent;return 0===e.offset?!!n:o}return"right"===n&&e.offset===t.len}_updatePoints(t,e,n,o){this.$editor.selection.updatePoints(t,e,n,o)}getSeletedPath(t){let e,n,o,r=!1;if(t.collapsed)r=!0;else{if(0===t.startOffset)e=t.startContainer;else if(t.startOffset===t.startContainer.len)e=t.startContainer.nextLeaf;else{const n=t.startContainer.split(t.startOffset);this._updatePoints(t.startContainer,t.startOffset+1,-t.startOffset,n[1]),e=n[1]}if(0===t.endOffset)n=t.endContainer.prevLeaf;else if(t.endOffset===t.startContainer.len)n=t.startContainer;else{const e=t.endContainer.split(t.endOffset);this.$editor.selection.updatePoints(t.endContainer,t.endOffset+1,-t.endOffset,e[1]),n=e[0]}}return o=e,{length:0,next:function(){if(r)return{value:void 0,done:r};{const t={value:o,done:r};return r=o===n,o=o.nextLeaf,this.length++,t}},[Symbol.iterator]:function(){return this}}}setFormat(t,e,n){if(e.ctrlKey){e.preventDefault();const o=this.$editor.queryCommonPath(t.startContainer,t.endContainer),r=this.getSeletedPath(t);for(const t of r)n(t.node.formats);o.component.update()}}}class ot{inputState={value:"",isComposing:!1};d=0;constructor(t,e){const{startContainer:n,endContainer:o,startOffset:r,endOffset:i,d:s}=t;this.endContainer=o,this.startContainer=n,this.endOffset=i,this.startOffset=r,this.editor=e,this.d=s,this.caret=new j.platform.Caret(this)}get collapsed(){return this.endContainer===this.startContainer&&this.endOffset===this.startOffset}get offset(){return 1===this.d?this.endOffset:this.startOffset}get container(){return 1===this.d?this.endContainer:this.startContainer}set offset(t){1===this.d?this.endOffset=t:this.startOffset=t,this.collapsed&&(this.d=0)}set container(t){1===this.d?this.endContainer=t:this.startContainer=t}set(t,e){this.container=t,this.offset=e,this.collapsed&&(this.d=0)}setEnd(t,e){this.endContainer=t,this.endOffset=e,this.collapsed&&(this.d=0)}setStart(t,e){this.startContainer=t,this.startOffset=e,this.collapsed&&(this.d=0)}collapse(t){t?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startOffset=this.endOffset,this.startContainer=this.endContainer),this.d=0,this.editor.selection.drawRangeBg()}updateCaret(t=!0){this.caret.update(this,t),this.editor.focus()}remove(){const t=this.editor.selection.ranges.findIndex((t=>t===this));this.caret.remove(),this.editor.selection.ranges.splice(t,1)}}class rt{ranges=[];nativeSelection=j.platform.nativeSelection;constructor(t){this.editor=t}get collapsed(){return this.ranges.every((t=>t.collapsed))}get rangeCount(){return this.ranges.length}get rangePoints(){const t=[];return this.ranges.forEach((e=>{t.push({container:e.startContainer,offset:e.startOffset,range:e,pointName:"start"},{container:e.endContainer,offset:e.endOffset,range:e,pointName:"end"})})),t}clearRanges(){for(;this.ranges.length;)this.ranges.pop().caret.remove()}createRange(t){return new ot(t,this.editor)}createRangeFromNativeRange(t){const{startContainer:e,endContainer:n,startOffset:o,endOffset:r,collapsed:i}=t,{focusNode:s,focusOffset:a}=this.nativeSelection;let c=0;return c=i?0:s===n&&a===r?1:-1,this.createRange({startContainer:this._queryPath(e),endContainer:this._queryPath(n),startOffset:o,endOffset:r,d:c})}addRange(t){this.ranges.push(t)}collapse(t,e){this.nativeSelection.collapse(t,e),this._resetRangesFromNative()}_queryPath(t){return this.editor.queryPath(t)||this._queryPath(t.parentNode)}_transformRange(t){const{startContainer:e,endContainer:n,startOffset:o,endOffset:r}=t,i=this.editor.queryPath(e),s=this.editor.queryPath(n);if(!i){const n=this._queryPath(e);t.setStart(n.elm,o)}if(!s){const e=this._queryPath(n);t.setStart(e.elm,r)}return t}_resetRangesFromNative(){this.clearRanges();const t=this.nativeSelection.rangeCount;for(let e=0;e<t;e++){const t=this._transformRange(this.nativeSelection.getRangeAt(e));if(!t)return;this.addRange(this.createRangeFromNativeRange(t))}}_extendRangesFromNative(){const t=this.nativeSelection.rangeCount;if(t>0){const e=this._transformRange(this.nativeSelection.getRangeAt(t-1));if(!e)return;let n=!1;if(this.ranges.forEach((t=>{t.endContainer===e.endContainer&&t.startOffset===e.startOffset&&(n=!0,t.remove())})),n)return;this.addRange(this.createRangeFromNativeRange(e))}}getRangeAt(t=0){return this.ranges[t]}removeAllRanges(){this.nativeSelection.removeAllRanges(),this.clearRanges()}createNativeRange({startContainer:t,startOffset:e,endContainer:n,endOffset:o}){const r=document.createRange();return r.setStart(t,e),r.setEnd(n,o),r}updatePoints(t,e,n,o){this.rangePoints.forEach((r=>{r.container===t&&e<=r.offset&&(r.range[r.pointName+"Offset"]+=n,o&&(r.range[r.pointName+"Container"]=o))}))}updateRanges(t){setTimeout((()=>{t?this._extendRangesFromNative():this._resetRangesFromNative(),this.updateCaret()}))}updateCaret(t=!0){this.ranges.forEach((e=>e.updateCaret(t))),this.rangeCount>1&&this._distinct(),t&&this.drawRangeBg()}_isCoverd(t,e){return t.y<e.y?t.y+t.height>=e.y+e.height:e.y+e.height>=t.y+t.height}_distinct(){let t={},e=this.ranges.length;if(!(e<2)){for(let n=0;n<e;n++){const o=this.ranges[n],r=`${this.editor.queryPath(o.startContainer).position}-${o.caret.rect.x}-${o.caret.rect.y}`;if(t[r])o.caret.remove(),this.ranges.splice(n,1),e--,n--;else{const i=Object.entries(t).filter((t=>o.caret.rect.x===t[1].caret.rect.x));0===i.length?t[r]=o:this._isCoverd(o.caret.rect,i[0][1].caret.rect)?(o.caret.remove(),this.ranges.splice(n,1),e--,n--):t[r]=o}}t=null}}drawRangeBg(t){const e=t||this.getRangeAt(0);if(!e)return;this.nativeSelection.removeAllRanges();const{startContainer:n,startOffset:o,endContainer:r,endOffset:i}=e,s={startContainer:n.elm,endContainer:r.elm,startOffset:o,endOffset:i};this.nativeSelection.addRange(this.createNativeRange(s))}}function it(t){return t.replace(/( |^)[a-z]/g,(t=>t.toUpperCase()))}const st={createPath:A,queryCommonPath:M,queryPath:P,Formater:V,Content:nt,Path:O,Selection:rt,createRef:function(){return{current:null}},createVnode:T,patch:U,Component:W,insertedInsQueue:N,utils:t,setVnElm:l,setVnIns:d,setVnPath:p,getVnOrElm:c,getVnOrPath:s,getVnOrIns:a},at=t=>t.install(j,st);class ct extends nt{render(){const t=arguments[arguments.length-1];return t("div",{style:"display:inline-block"},[t("img",{onMousedown:this.onMousedown,onClick:this.sizeChange,...this.$path.node.data},[])])}onMousedown=t=>{t.preventDefault(),t.stopPropagation()};sizeChange=t=>{"50px"===this.$path.node.data.width?(this.$path.node.data.width="200px",this.$path.node.data.height="200px"):(this.$path.node.data.width="50px",this.$path.node.data.height="50px"),this.update()};onAfterUpdate(){this.$editor.selection.updateCaret()}contentDelete(t,e){const{endOffset:n,collapsed:o}=e;if(o)if(n>0){const n=this.$path.parent.component;t.delete(),n.update(),n.caretEnter(this.$path.parent,e,!1)}else{const n=this.getPrevLeafPath(t);n&&n.component.caretEnter(n,e,!1)}}caretEnter(t,e,n){return console.log(t,this.$path),e.set(t,"left"===n?0:1),{path:t,range:e}}get contentLength(){return 1}}const lt=(t,e,n=[])=>{const o=t.blockComponent;t.blockComponent!==e.blockComponent&&(0===e.len&&e.component.$editor.selection.rangePoints.filter((t=>t.container===e)).forEach((t=>{"start"===t.pointName?(console.log(e.nextLeaf),t.range.setStart(e.nextLeaf,0)):t.range.setEnd(e.nextLeaf,0)})),t.blockComponent.$path.insertChildrenAfter(e),o.$path.parent.component.update(),n.forEach((t=>{t.component.update()})))};class dt extends nt{_type="block";contentDelete(t,e){const{endContainer:n,endOffset:o,startContainer:r,startOffset:i,collapsed:s}=e;if(s)if(o>0)if(r.contentDelete(o,1),0===this.contentLength)e.setStart(r,0);else if(0===r.len){const{path:t}=this.caretLeave(r,e,"left");if(!t)return;t.blockComponent!==r.blockComponent?e.setStart(r,0):r.delete()}else this._updatePoints(n,o,-1);else{const{path:t}=this.caretLeave(r,e,"left");if(!t)return;if(!this.contentLength){const t=this.$path.parent.component;this.$path.delete(),t.update()}lt(r,t)}else r===n?r.contentDelete(o,o-i):(r.contentDelete(r.len,r.len-i),n.contentDelete(o,o),t.deleteBetween(r,n),lt(n,r));e.collapse(!0),this.update(t,e)}onKeydownB(t,e){this.setFormat(t,e,(t=>{t.bold=!t.bold}))}onKeydownD(t,e){this.setFormat(t,e,(t=>{t.del=!t.del}))}onKeydownS(t,e){this.setFormat(t,e,(t=>{t.sup=!t.sup}))}onKeydownU(t,e){this.setFormat(t,e,(t=>{t.underline=!t.underline}))}}class pt extends dt{render(){const t=arguments[arguments.length-1];return t("div",{},[this.$path.children.length?yt.render(this.$path):this.state.placeholder(t)])}}class ht extends dt{render(){return(0,arguments[arguments.length-1])("p",{},[yt.render(this.$path)])}}class ft extends dt{render(){return(0,arguments[arguments.length-1])("table",{border:"1",style:"border-collapse:collapse;width:600px"},[yt.render(this.$path)])}}class ut extends dt{render(){return(0,arguments[arguments.length-1])("tr",{},[yt.render(this.$path)])}}class mt extends dt{constructor(t){super(t),this.state._$root={current:null}}render(){return(0,arguments[arguments.length-1])("td",{ref:this.state._$root,style:"text-align:center;width:50%"},[yt.render(this.$path)])}}const gt=new V;[{name:"root",type:"component",render(t,e){return(0,arguments[arguments.length-1])(pt,{...e},[])}},{name:"bold",type:"tag",render(t){const e=(0,arguments[arguments.length-1])("strong",{},[]);return t&&t.children.push(e),e}},{name:"image",isLeaf:!0,type:"component",render(t,e){const n=(0,arguments[arguments.length-1])(ct,{...e},[]);return t&&t.children.push(n),n}},{name:"underline",type:"tag",render(t){const e=(0,arguments[arguments.length-1])("u",{},[]);return t&&t.children.push(e),e}},{name:"fontSize",type:"attribute",render(t,e){if(!t)return(0,arguments[arguments.length-1])("span",{style:{"font-size":e}},[]);t.props.style||(t.props.style={}),t.props.style["font-size"]=e}},{name:"color",type:"attribute",render(t,e){if(!t)return(0,arguments[arguments.length-1])("span",{style:{color:e}},[]);t.props.style||(t.props.style={}),t.props.style.color=e}},{name:"paragraph",type:"component",render(t,e){const n=(0,arguments[arguments.length-1])(ht,{...e},[]);return t&&t.children.push(n),n}},{name:"del",type:"tag",render(t){const e=(0,arguments[arguments.length-1])("del",{},[]);return t&&t.children.push(e),e}},{name:"sup",type:"tag",render(t){const e=(0,arguments[arguments.length-1])("sup",{},[]);return t&&t.children.push(e),e}},{name:"table",type:"component",render(t,e){const n=(0,arguments[arguments.length-1])(ft,{...e},[]);return t&&t.children.push(n),n}},{name:"row",type:"component",render(t,e){const n=(0,arguments[arguments.length-1])(ut,{...e},[]);return t&&t.children.push(n),n}},{name:"col",type:"component",render(t,e){const n=(0,arguments[arguments.length-1])(mt,{...e},[]);return t&&t.children.push(n),n}}].forEach((t=>{gt.register(t)}));const yt=gt;n(22);var vt=n(379),bt=n.n(vt),xt=n(795),wt=n.n(xt),Ct=n(569),kt=n.n(Ct),St=n(565),_t=n.n(St),Et=n(216),Lt=n.n(Et),Ot=n(589),At=n.n(Ot),Mt=n(259),Pt={};Pt.styleTagTransform=At(),Pt.setAttributes=_t(),Pt.insert=kt().bind(null,"head"),Pt.domAPI=wt(),Pt.insertStyleElement=Lt(),bt()(Mt.Z,Pt),Mt.Z&&Mt.Z.locals&&Mt.Z.locals;class zt extends W{constructor(t){super(t)}render(){const t=arguments[arguments.length-1],{tools:e}=this.props;return t("div",{class:"tool-bar"},[e.map((e=>t(Bt,{width:"64",content:e.tooltip},[t(Rt,{...{...e,onCommand:this.onCommand}},[])])))])}onCommand=(t,...e)=>{this.props.onCommand(t,...e)}}class Rt extends W{constructor(t){super(t),this.state={value:!0},this.dialogRef={current:null}}render(){const t=arguments[arguments.length-1];return t("span",{onClick:this.click,class:"tool-bar-item",style:`color: ${this.state.value?"rgb(227 227 227);":"rgb(42 201 249)"};`},[t("svg",{class:"icon","aria-hidden":!0,ns:"http://www.w3.org/2000/svg"},[t("use",{"xlink:href":this.props.icon},[])])])}click=()=>{console.log("click"),this.setState({value:!this.state.value})}}class Bt extends W{render(){const t=arguments[arguments.length-1];return t("div",{class:"editor-tooltip"},[this.props.children.length?this.props.children:"",t("span",{class:"tooltiptext top",style:`width:${this.props.width}px;margin-left:-${this.props.width/2}px;`},[this.props.content||"content"])])}}function Nt(t){this.ui.body=document.getElementById(t);const e=document.createElement("div"),n={current:null};this.ui.body.appendChild(e),yt.editor=this,U(function(t,e){const n=arguments[arguments.length-1];return n("div",{class:"editor-wrappe"},[n(zt,{tools:[...t.toolBarOption]},[]),n("div",{id:"editor-content",style:"position:relative",ref:e},[yt.render(t.$path)])])}(this,n,T),e),console.log(n.current),this.ui.content=n.current}function $t(t,e){return t.replace(/(\d*).*/,(function(t,n){return n*e}))}let Tt;Tt=Range.prototype.getClientRects?t=>{const e=document.createRange();let n;3!==t.container.elm.nodeType?0===t.offset?(e.setStart(t.container.elm,t.offset),e.setEnd(t.container.elm,t.offset+1),n=e.getClientRects()[0]):(e.setStart(t.container.elm,t.offset-1),e.setEnd(t.container.elm,t.offset),n=e.getClientRects()[0],n.x+=n.width):(e.setStart(t.container.elm,t.offset),n=e.getClientRects()[0]),e.setStart(t.container.elm,t.offset);const o=Ht(t.editor.ui.content),r=Ft(t.editor.ui.content);return{x:n.x+o.x-r.x,y:n.y+o.y-r.y,height:n.height}}:t=>(new jt).measure(t.container.elm,t.offset);const Dt={};class Vt{dom=null;rect=null;constructor(t){this.range=t,this.dom=document.createElement("span"),this.dom.classList.add("custom-caret"),this.setStyle(this.dom)}setStyle(t={}){const e=Object.assign({},Dt,t);((t,e)=>{for(const n in e)t.style[n]=e[n]})(this.dom,e)}remove(){this.dom.remove()}update(t,e=!0){if(this.rect=Tt(t),!e)return;t.editor.ui.content.appendChild(this.dom);let n=t.startContainer.elm;if(!n)return;n instanceof Element||(n=n.parentNode);const o=getComputedStyle(n),r={top:this.rect.y+"px",left:this.rect.x-1+"px",height:this.rect.height+"px",fontSize:o.fontSize,background:o.color,display:t.collapsed?"inline-block":"none"};this.setStyle(r)}}class jt{dom=null;instance=null;constructor(){if(jt.instance)return jt.instance;this.dom=document.createElement("text"),jt.instance=this}measure(t,e){let n;return 3===t.nodeType?e?(n=t.splitText(e),t.parentNode.insertBefore(this.dom,n)):t.parentNode.insertBefore(this.dom,t):t.childNodes[e-1]&&"BR"===t.childNodes[e-1].nodeName?t.insertBefore(this.dom,t.childNodes[e-1]):t.childNodes[e]?t.insertBefore(this.dom,t.childNodes[e]):t.appendChild(this.dom),this._getRect(t,e,n)}_getRect(t,e,n){let o=t;t instanceof Element||(o=t.parentNode);const r=$t(getComputedStyle(o).fontSize,1.3)/1,i={x:this.dom.offsetLeft,y:this.dom.offsetTop,height:r||this.dom.offsetHeight};return this.dom.remove(),3===t.nodeType&&e&&(!t.data&&t.nextSibling?t.nextSibling.remove():(t.data+=n.data,n.remove())),i}}function Ft(t,e={x:0,y:0}){return e.height=e.height??t.offsetHeight,e.x+=t.offsetLeft,e.y+=t.offsetTop,t.offsetParent&&"HTML"!==t.offsetParent.tagName?Ft(t.offsetParent,e):e}function Ht(t,e={x:0,y:0}){return e.x+=t.scrollLeft||0,e.y+=t.scrollTop||0,t.parentNode?Ht(t.parentNode,e):e}const It={};function Kt(t,e,n){let o,r=n?.props,i=e.props;if((r||i)&&r!==i){for(o in r=r||{},i=i||{},i){if(/^on[A-Z]|class|style/.test(o))continue;const e=i[o];r[o]!==e&&(!0===e?t.setAttribute(o,""):!1===e?t.removeAttribute(o):120!==o.charCodeAt(0)?t.setAttribute(o,e):58===o.charCodeAt(3)?t.setAttributeNS("http://www.w3.org/XML/1998/namespace",o,e):58===o.charCodeAt(5)?t.setAttributeNS("http://www.w3.org/1999/xlink",o,e):t.setAttribute(o,e))}for(o in r)o in i||t.removeAttribute(o)}}const qt={create:Kt,update:Kt};function Ut(t,e,n){let o=new Map,r=new Map;e&&Object.keys(e.props).forEach((t=>{/^on[A-Z]/.test(t)&&r.set(t.replace(/^on/,"").toLowerCase(),e.props[t])})),n&&Object.keys(n.props).forEach((t=>{/^on[A-Z]/.test(t)&&o.set(t.replace(/^on/,"").toLowerCase(),e.props[t])})),(o.size||r.size)&&(r.forEach(((e,n)=>{o.has(n)||t.addEventListener(n,e,!1)})),o.forEach(((e,n)=>{r.has(n)||t.removeEventListener(n,e,!1)})))}const Zt={create:Ut,update:Ut};function Gt(t,e,n){const o=(e?.props.class||"").trim();let r,i;o&&t.setAttribute("class",o);const s=(n?.props.class||"").trim(),a=(e?.props.class||"").trim();(s||a)&&s!==a&&(r=new Set(s?s.split(/\s+/g):[]),i=new Set(a?a.split(/\s+/g):[]),i.forEach((e=>{r.has(e)||t.classList.add(e)})),r.forEach((e=>{i.has(e)||t.classList.remove(key)})))}const Qt={create:Gt,update:Gt},Wt={};function Jt(t,e,n){let o=n?.props.style,r=e?.props.style;(o||r)&&o!==r&&(o=o||Wt,r=r||Wt,Object.keys(o).forEach((e=>{r[e]||t.style.removeProperty(e)})),Object.assign(t.style,r))}const Yt={create:Jt,update:Jt};function Xt(t,e){if("function"==typeof t.type)return;const n=It.core.getVnOrElm(t);"text"===t.type?t.children!==e.children&&(n.data=t.children):(Yt.update(n,t,e),Qt.update(n,t,e),Zt.update(n,t,e),qt.update(n,t,e))}function te(t){let e;if("text"===t.type)return e=document.createTextNode(t.children),It.core.setVnElm(e,t),e;if("function"==typeof t.type)if(t.type.isComponent){const n=new t.type(t.props),o=n.render(It.core.createVnode);t.ins=n,n._$pv=t,It.core.setVnIns(n,o),t.ref&&(t.ref.current=n),e=te(o),It.core.insertedInsQueue.push(n),It.core.setVnElm(e,o),Xt(o)}else{const n=t.type(It.core.createVnode,t.props);It.core.setVnIns(t,n),e=te(n),t.ref&&(t.ref.current=e),It.core.setVnElm(e,n),Xt(t)}else e=t.ns?document.createElementNS(t.ns,t.type):document.createElement(t.type),t.ref&&(t.ref.current=e),It.core.setVnElm(e,t),Xt(t);if(1===t.children?.length)e.appendChild(te(t.children[0]));else if(t.children?.length>1){const n=document.createDocumentFragment();for(let e=0;e<t.children.length;e++){const o=t.children[e];n.appendChild(te(o))}e.appendChild(n)}return e}class ee{input=null;constructor(t){this.editor=t,this._initIframe(),this._initInput(),this._initEvent()}_initIframe(){this.iframe=document.createElement("iframe"),this.iframe.classList.add("custom-input-iframe"),this.editor.ui.content.appendChild(this.iframe);const t=this.iframe.contentDocument,e=t.createElement("style");e.innerHTML="\n      .custom-input:focus {\n       outline: none;\n    }\n      .custom-input {\n        top: 0;\n        left: 0;\n        pointer-events: none;\n        width: 2px;\n        background: transparent;\n        border: none;\n        padding: 0;\n        opacity: 0;\n        caret-color: transparent;\n        color: transparent;\n      }\n    ",t.head.appendChild(e)}_initInput(){const t=this.iframe.contentDocument;this.input=t.createElement("input"),this.input.classList.add("custom-input"),t.body.appendChild(this.input)}focus(t){if(!(t=t||this.editor.selection.getRangeAt(0)))return;let e=t.startContainer.elm;e instanceof Element||(e=e.parentNode);const n=$t(getComputedStyle(e).fontSize,1),o={position:"absolute",top:t.caret.rect.y+n/1+"px",left:t.caret.rect.x+"px"};!function(t,e){for(const n in e)t.style[n]=e[n]}(this.iframe,o),this.input.focus()}destroy(){this.input.removeEventListener("compositionstart",this._inputEvent.bind(this)),this.input.removeEventListener("compositionend",this._inputEvent.bind(this)),this.input.removeEventListener("input",this._inputEvent.bind(this)),this.iframe.contentDocument.removeEventListener("keydown",this._handGolobalKeydown.bind(this)),this.iframe.contentDocument.removeEventListener("keyup",this._handGolobalKeydown.bind(this))}_initEvent(){this.input.addEventListener("compositionstart",this._inputEvent.bind(this)),this.input.addEventListener("compositionend",this._inputEvent.bind(this)),this.input.addEventListener("input",this._inputEvent.bind(this)),this.iframe.contentDocument.addEventListener("keydown",this._handGolobalKeydown.bind(this)),this.iframe.contentDocument.addEventListener("keyup",this._handGolobalKeydown.bind(this))}_inputEvent(t){this.editor.emit("keyboardEvents",t)}_handGolobalKeydown(t){this.editor.emit("keyboardEvents",t)}}const ne=document.getSelection();class oe{constructor(t){this.editor=t,this._addListeners()}destroy(){this.editor.ui.content.removeEventListener("mouseup",this._handMouseup.bind(this)),this.editor.ui.content.removeEventListener("mousedown",this._handMousedown.bind(this))}_addListeners(){this.editor.ui.content.addEventListener("mouseup",this._handMouseup.bind(this)),this.editor.ui.content.addEventListener("mousedown",this._handMousedown.bind(this))}_handMousedown(t){if(this.editor.emit("mouseEvents",t),!t.shiftKey&&0===t.button){const e=ne.rangeCount;for(let t=0;t<e;t++)ne.getRangeAt(t).collapse(!0);this.editor.selection.updateRanges(t.altKey)}}_handMouseup(t){ne.collapsed&&!t.shiftKey||this.editor.selection.updateRanges(t.altKey),this.editor.focus()}}function re(t){const e=new ee(t),n=new oe(t);return t.on("focus",(t=>e.focus(t))),function(){e.destroy(),n.destroy()}}const ie=document,se=window,ae=document.getSelection();function ce(t,e,n){return t.insertBefore(e,n)}function le(t,e,n){return t.replaceChild(e,n)}function de(t,e){return t.appendChild(e)}function pe(t,e){return t.removeChild(e)}function he(t){const e=t.tagName.toLowerCase()||"text";if("text"===e)return It.core.createVnode(e);const n={},o=[],r=t.attributes,i=t.childNodes;for(let t=0,e=r.length;t<e;t++){let e=r[t].nodeName;"style"===e&&isPrimitive(r[t].nodeValue)?n[e]=styleToObj(r[t].nodeValue):n[e]=r[t].nodeValue}for(let t=0,e=i.length;t<e;t++)o.push(he(i[t]));return It.core.createVnode(e,n,o)}const fe={...e};fe.install=(t,n)=>(It.core=n,t.platform=e,fe.initIntercept);const ue=fe,me={data:{marks:[{data:{marks:[{data:{marks:[{data:"这是一个基于Typex编写的简单富文本编辑器demo（工具栏功能没写目前无效）",formats:{color:"#666",bold:!0,fontSize:"20px"}}]},formats:{paragraph:!0}},{data:{marks:[{data:"Typex",formats:{color:"#ff9999"}},{data:"是一款全新架构的编辑器内核，该内核不依赖contenteditable;自主实现了光标、模拟输入、模拟选区;数据驱动，组件化，插件化，支持多光标，跨平台的设计。优秀的格式排版系统避免了脏标签的产生（打开控制台你会发现它的标签非常简洁）。",formats:{color:"#999"}}]},formats:{paragraph:!0}},{data:{marks:[{data:"下面是一些测试demo",formats:{color:"#ff9999"}},{data:"多光标：按住alt+左键；加粗/取消加粗：ctrl+b；删除线/取消删除线：ctrl+d；上标/取消上标：ctrl+s ....",formats:{color:"#999"}}]},formats:{paragraph:!0}},{data:{marks:[{data:"36px",formats:{color:"green",fontSize:"36px"}},{data:"12px",formats:{color:"red",fontSize:"12px"}},{data:"12px",formats:{color:"red",fontSize:"18px"}}]},formats:{paragraph:!0}},{data:{marks:[{data:{src:"https://img2.baidu.com/it/u=3979034437,2878656671&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",alt:"test image",width:"60px",height:"60px"},formats:{image:!0}},{data:{src:"https://img2.baidu.com/it/u=3979034437,2878656671&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=333",alt:"test image",width:"50px",height:"50px"},formats:{image:!0}}]},formats:{paragraph:!0}},{data:{marks:[{data:"this is Paragraph",formats:{color:"green"}}]},formats:{paragraph:!0}},{data:{marks:[{data:"world",formats:{del:!0,color:"red"}},{data:"eee",formats:{del:!0,color:"green"}},{data:"hhhha",formats:{sup:!0,del:!0,color:"green",fontSize:"12px"}},{data:"qqq",formats:{color:"green"}},{data:"分词器",formats:{color:"green"}}]},formats:{paragraph:!0}},{data:{marks:[{data:"qqq",formats:{color:"green"}},{data:"www",formats:{color:"red"}}]},formats:{paragraph:!0}},{data:{marks:[{data:{marks:[{data:{marks:[{data:"1111",formats:{color:"red",bold:!0}},{data:"333",formats:{del:!0,color:"red",fontSize:"22px"}}]},formats:{col:!0}},{data:{marks:[{data:"1111",formats:{color:"green"}}]},formats:{col:!0}}]},formats:{row:!0}}]},formats:{table:!0}}]},formats:{root:!0}}]}};class ge{ui={body:null};toolBarOption=[];constructor(t){this.$path=t.path,function(t){const{editor:e,formater:n,platform:o}=t;var r;e.$eventBus={all:r=r||new Map,on:function(t,e){var n=r.get(t);n?n.push(e):r.set(t,[e])},off:function(t,e){var n=r.get(t);n&&(e?n.splice(n.indexOf(e)>>>0,1):r.set(t,[]))},emit:function(t,e){var n=r.get(t);n&&n.slice().map((function(t){t(e)})),(n=r.get("*"))&&n.slice().map((function(n){n(t,e)}))}},n.inject("editor",e);const i=at(o);e.selection=new rt(e),Promise.resolve().then((()=>{i(e)})),function(t){t.on("mouseEvents",(e=>{if(!e.shiftKey&&0===e.button){const n=j.platform.nativeSelection.rangeCount;for(let t=0;t<n;t++)j.platform.nativeSelection.getRangeAt(t).collapse(!0);t.selection.updateRanges(e.altKey)}})),t.on("keyboardEvents",(e=>{t.selection.ranges.forEach((t=>{const n=t.container,o=e.key?n.component[`on${it(e.type)}${it(e.key)}`]?.bind(n.component):null;let r;r=e.type.startsWith("composition")?n.component.onInput?.bind(n.component):n.component[`on${it(e.type)}`]?.bind(n.component),e.key&&"function"==typeof o&&o(t,e),"function"==typeof r&&r(t,e)})),Promise.resolve().then((()=>{t.selection.updateCaret()}))}))}(e)}({editor:this,formater:yt,platform:ue})}mount(t){return Nt.call(this,t),this}setToolBar(t){return this.toolBarOption=t,this}on(t,e){this.$eventBus.on(t,e)}emit(t,e){this.$eventBus.emit(t,e)}focus(t){this.$eventBus.emit("focus",t)}queryPath(t){return P(t,this.$path)}queryCommonPath(t,e){return M(this.queryPath(t),this.queryPath(e))}}var ye=n(815),ve={};ve.styleTagTransform=At(),ve.setAttributes=_t(),ve.insert=kt().bind(null,"head"),ve.domAPI=wt(),ve.insertStyleElement=Lt(),bt()(ye.Z,ve),ye.Z&&ye.Z.locals&&ye.Z.locals,window.editor=function(t={}){const e=A(me);return new ge({path:e})}({data:"hello world"}).setToolBar([{tooltip:"撤销",command:"undo",icon:"#icon-undo"},{tooltip:"重做",command:"todo",icon:"#icon-todo"},{tooltip:"标题",command:"header",icon:"#icon-header"},{tooltip:"字体大小",command:"fontSize",icon:"#icon-font-size"},{tooltip:"字体颜色",command:"fontColor",icon:"#icon-color"},{tooltip:"加粗",command:"bold",icon:"#icon-bold"},{tooltip:"下划线",command:"underline",icon:"#icon-underline"},{tooltip:"删除线",command:"deleteline",icon:"#icon-del"},{tooltip:"背景填充",command:"background",icon:"#icon-fill"},{tooltip:"左对齐",command:"leftAligned",icon:"#icon-align-left"},{tooltip:"居中",command:"middleAligned",icon:"#icon-align-middle"},{tooltip:"右对齐",command:"rightAligned",icon:"#icon-align-right"},{tooltip:"超链接",command:"link",icon:"#icon-link"},{tooltip:"图片",command:"img",icon:"#icon-img"},{tooltip:"代码段",command:"code",icon:"#icon-code"},{tooltip:"markdown",command:"markdown",icon:"#icon-markdown"},{tooltip:"视频",command:"radio",icon:"#icon-radio"},{tooltip:"清除样式",command:"clearStyle",icon:"#icon-clear-style"}]).mount("editor-root")})()})();